/*
 * generated by Xtext 2.41.0
 */
package org.xtext.example.easywall.tests

import com.google.inject.Inject
import org.eclipse.xtext.testing.InjectWith
import org.eclipse.xtext.testing.extensions.InjectionExtension
import org.eclipse.xtext.testing.util.ParseHelper
import org.junit.jupiter.api.Assertions
import org.junit.jupiter.api.Test
import org.junit.jupiter.api.^extension.ExtendWith
import org.xtext.example.easywall.easyWall.EFProgram

@ExtendWith(InjectionExtension)
@InjectWith(EasyWallInjectorProvider)
class EasyWallParsingTest {
	@Inject
	ParseHelper<EFProgram> parseHelper
	
	@Test
	def void loadModel() {
		val result = parseHelper.parse('''
			Hello Xtext!
		''')
		Assertions.assertNotNull(result)
		val errors = result.eResource.errors
		Assertions.assertTrue(errors.isEmpty, '''Unexpected errors: «errors.join(", ")»''')
	}
	@Test
	def void firstProgram(){
		var result = parseHelper.parse('''
		pack my.fire;
		import net.rules.*;
		firewall MyFirewall {
		    set ipAddress : netip;
		    var portNumber : netport;
		    def checkPort : netport (param : netport) {
		        var result : netport = param;
		        if (result == portNumber) {
		            return result;
		        } else {
		            return portNumber;
		        }
		    }
		}
		''')
		Assertions.assertNotNull(result)
		val errors = result.eResource.errors
		Assertions.assertTrue(errors.isEmpty, '''Unexpected errors: «errors.join(", ")»''')
	}
	@Test
	def void ruleINDirection(){
		var result = parseHelper.parse('''
		pack my.fire;
		import net.rules.*;
		rule r at ApplicationLayer{
		    var dir : direction = in;
		}
		''')
		Assertions.assertNotNull(result)
		val errors = result.eResource.errors
		Assertions.assertTrue(errors.isEmpty, '''Unexpected errors: «errors.join(", ")»''')
	}
	@Test
	def void ruleOUTDirection(){
		var result = parseHelper.parse('''
		pack my.fire;
		import net.rules.*;
		rule r at ApplicationLayer{
		    var dir : direction = out;
		}
		''')
		Assertions.assertNotNull(result)
		val errors = result.eResource.errors
		Assertions.assertTrue(errors.isEmpty, '''Unexpected errors: «errors.join(", ")»''')
	}
}
